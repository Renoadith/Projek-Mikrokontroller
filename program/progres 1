#include <Arduino.h>

// Konfigurasi pin
const int microphonePin = A0;  // Pin mikrofon
const int ledPin = 13;         // Pin LED
const int speakerPin = 9;      // Pin speaker
const int lcdPin = 4;          // Pin LCD

// Konstanta
const int threshold = 200;     // Batas kebisingan (adjustable)

void setup() {
  pinMode(microphonePin, INPUT);
  pinMode(ledPin, OUTPUT);
  pinMode(speakerPin, OUTPUT);
  pinMode(lcdPin, OUTPUT);
  Serial.begin(9600);
}

void loop() {
  int soundLevel = analogRead(microphonePin);  // Baca level suara dari mikrofon
  Serial.println(soundLevel);                 // Cetak level suara ke serial monitor

  if (soundLevel > threshold) {             // Jika level suara lebih besar dari batas kebisingan
    digitalWrite(ledPin, HIGH);               // Nyalakan LED
    digitalWrite(speakerPin, HIGH);          // Nyalakan speaker
    analogWrite(lcdPin, 255);              // Tampilkan level suara pada LCD
  } else {
    digitalWrite(ledPin, LOW);               // Matikan LED
    digitalWrite(speakerPin, LOW);          // Matikan speaker
    analogWrite(lcdPin, 0);               // Tampilkan level suara pada LCD (0)
  }
}

void displayLCD() {
  char buffer[20];
  itoa(soundLevel, buffer, 10);        // Konversi level suara ke string
  lcd.print(buffer);                    // Tampilkan level suara pada LCD
}
